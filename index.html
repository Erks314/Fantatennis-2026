<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FantaTennis</title>
    <style>
        * {margin:0;padding:0;box-sizing:border-box;}
        body{font-family:'Segoe UI',sans-serif;background:linear-gradient(135deg,#1a472a 0%,#0f2818 50%,#1a472a 100%);min-height:100vh;padding:20px;color:#333;}
        .container{max-width:1400px;margin:0 auto;}
        .header{text-align:center;margin-bottom:30px;}
        .title{font-size:2.5em;font-weight:900;background:linear-gradient(135deg,#FFD700 0%,#FFA500 50%,#FF8C00 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;text-shadow:2px 2px 4px rgba(0,0,0,0.3);letter-spacing:1px;text-transform:uppercase;}
        .subtitle{font-size:1em;color:#fff;opacity:0.9;font-weight:300;}
        .table-wrapper{background:rgba(255,255,255,0.95);border-radius:15px;padding:20px;box-shadow:0 15px 40px rgba(0,0,0,0.3);overflow:auto;}
        #fantatable {
  page-break-inside: auto;
}
#fantatable tr { 
  page-break-inside: avoid; 
  page-break-after: auto;
}
        table{width:100%;border-collapse:collapse;font-size:0.9em;}
        th,td{padding:8px 12px;text-align:center;border-bottom:1px solid #eee;height:50px;vertical-align:middle;}
        th{background:linear-gradient(135deg,#1a472a 0%,#2d6b4a 100%);color:white;font-weight:bold;font-size:0.85em;border-radius:8px 8px 0 0;}
        .player-avatar{width:45px;height:45px;margin:0 auto 5px;background:linear-gradient(135deg,#FFD700,#FFA500);border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:1.2em;font-weight:bold;color:white;box-shadow:0 3px 10px rgba(255,215,0,0.3);border:2px solid white;}
        .player-name{font-size:0.75em;color:white;font-weight:600;}
        .player-avatar img{width:100%;height:100%;object-fit:cover;border-radius:50%;border:2px solid white;}
        .player-avatar img{width:100%;height:100%;object-fit:cover;border-radius:50%;border:2px solid white;}
        .player-avatar img{width:100%;height:100%;object-fit:cover;border-radius:50%;border:2px solid white;}

        input{width:100%;padding:6px;border:1px solid #ddd;border-radius:5px;font-size:1em;font-weight:500;text-align:center;color:#1a472a;transition:all 0.2s;}
        input:focus{outline:none;border-color:#FFD700;background:#fffef0;box-shadow:0 0 0 2px rgba(255,215,0,0.2);}
        .total-row {
    background: linear-gradient(135deg, #1a472a 0%, #2d6b4a 100%)!important;
    color: white!important;
    font-weight: bold;
    font-size: 1.1em!important;
    border-bottom: none!important;
    border-radius: 0 0 0 8px;
}
        .total-row td{border-radius:0 0 8px 0;}
        .controls{margin-top:25px;display:flex;gap:12px;justify-content:center;flex-wrap:wrap;}
        .btn{padding:12px 25px;border:none;border-radius:8px;font-size:0.95em;font-weight:600;cursor:pointer;transition:all 0.3s;text-transform:uppercase;}
        .btn-primary{background:linear-gradient(135deg,#FFD700 0%,#FFA500 100%);color:white;box-shadow:0 6px 15px rgba(255,215,0,0.3);}
        .btn-primary:hover{transform:translateY(-2px);box-shadow:0 10px 25px rgba(255,215,0,0.4);}
        .btn-success{background:#27ae60;color:white;box-shadow:0 6px 15px rgba(39,174,96,0.3);}
        .btn-success:hover{background:#229954;transform:translateY(-2px);}
        .btn-danger{background:#e74c3c;color:white;box-shadow:0 6px 15px rgba(231,76,60,0.3);}
        .modal{display:none;position:fixed;z-index:1000;left:0;top:0;width:100%;height:100%;background:rgba(0,0,0,0.5);}
        .modal-content{background:white;margin:15% auto;padding:25px;border-radius:12px;width:90%;max-width:400px;box-shadow:0 10px 30px rgba(0,0,0,0.3);}
        .modal-header{font-size:1.4em;font-weight:bold;color:#1a472a;margin-bottom:15px;}
        .modal-input{width:100%;padding:10px;margin-bottom:15px;border:2px solid #ddd;border-radius:6px;font-size:1em;}
        .modal-input:focus{outline:none;border-color:#FFD700;}
        .modal-buttons{display:flex;gap:10px;justify-content:flex-end;}
        .status{display:none;background:#27ae60;color:white;padding:10px;border-radius:8px;margin-top:15px;text-align:center;}
        @media(max-width:768px){.title{font-size:1.8em;}.table-wrapper{padding:15px;font-size:0.8em;}th,td{padding:6px 8px;height:45px;}}
    </style>

</head>
<body>
    <div class="container">
        <div class="header">
            <h1 class="title">âš¡ FantaTennis 2026</h1>
            <p class="subtitle">Ranking condiviso</p>
        </div>
        <div class="table-wrapper">
            <table id="fantatable">
                <thead id="tablehead"></thead>
                <tbody id="tablebody"></tbody>
            </table>
        </div>
        <div class="controls">
            <button class="btn btn-primary" onclick="openModal()">+ Aggiungi Torneo</button>
            <button class="btn btn-success" onclick="saveData()">ðŸ’¾ Salva</button>
            <button class="btn btn-danger" onclick="resetData()">ðŸ”„ Reset</button>
            <button onclick="exportCSV()" style="background:#8e44ad;color:white;border:none;padding:8px 12px;border-radius:6px;font-weight:600;">ðŸ“Š CSV Excel</button>
        </div>
        <div id="status" class="status"></div>
    </div>

    <div id="modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">Nuovo Torneo</div>
            <input type="text" id="tournamentname" class="modal-input" placeholder="Australian Open, Wimbledon...">
            <div class="modal-buttons">
                <button class="btn btn-primary" onclick="addTournament()">Aggiungi</button>
                <button class="btn" style="background:#ddd;color:#333;" onclick="closeModal()">Annulla</button>
            </div>
        </div>
    </div>

    <script>
        const players=[
  {name:'Gennaro',photo:'Gennaro.jpg'},
  {name:'Mirko',photo:'Mirko.jpg'},
  {name:'Federico',photo:'Federico.jpg'},
  {name:'Ciro',photo:'Ciro.jpg'},
  {name:'Damiano',photo:'Damiano.jpg'},
  {name:'Carlo',photo:'Carlo.jpg'},
  {name:'Francesco',photo:'Francesco.jpg'},
  {name:'Friarello',photo:'Friarello.jpg'},
  {name:'Giuseppe',photo:'Giuseppe.jpg'},
  {name:'Donatello',photo:'Donatello.jpg'}
];
        let tournaments=[];
        function init(){loadData();renderTable();}
        function renderTable(){renderHead();renderBody();}
        function renderHead(){const head=document.getElementById('tablehead');head.innerHTML='<tr><th>TORNEO</th>'+players.map(p=>`<th>${getAvatar(p)}<div class="player-name">${p.name}</div></th>`).join('')+'</tr>';}
        function getAvatar(p){
  return `<div class="player-avatar">
    <img src="${p.photo}" style="width:100%;height:100%;object-fit:cover;border-radius:50%;border:2px solid white;display:block;" 
    onerror="this.style.display='none';this.parentNode.innerHTML='${p.name.charAt(0)}';">
  </div>`;
}
        function renderBody(){const body=document.getElementById('tablebody');body.innerHTML='';
            tournaments.forEach((t,i)=>{const row=document.createElement('tr');row.innerHTML='<td>'+t.name+'<button onclick="deleteTournament('+i+')" style="margin-left:10px;background:#e74c3c;color:white;border:none;padding:2px 8px;border-radius:4px;font-size:0.7em;">X</button></td>'+players.map((p,j)=>`<td><input type="number" step="0.1" value="${t.scores[j]||''}" onchange="updateScore(${i},${j},this.value)" placeholder="â€”"></td>`).join('');body.appendChild(row);});
            const totalRow=document.createElement('tr');totalRow.className='total-row';totalRow.innerHTML='<th>TOTALE</th>'+players.map((p,j)=>`<td>${getTotal(j)}</td>`).join('');body.appendChild(totalRow);}
        function getTotal(playerIdx){
  const total = tournaments.reduce((sum,t)=>{
    const score = parseFloat(t.scores[playerIdx]);
    return sum + (isNaN(score) ? 0 : score);
  }, 0);
  return total.toFixed(1);
}
        function exportCSV(){let csv='TORNEO,'+players.map(p=>p.name).join(',')+'
';tournaments.forEach(t=>{csv+=t.name+','+players.map((p,j)=>t.scores[j]||'').join(',')+'
'});csv+='TOTALE,'+players.map((p,j)=>getTotal(j)).join(',');const a=document.createElement('a');a.href='data:text/csv;charset=utf-8,'+encodeURIComponent(csv);a.download='FantaTennis.csv';a.click();showStatus('CSV OK!');}
        function updateScore(tIdx,pIdx,value){tournaments[tIdx].scores[pIdx]=value;renderTable();}
        function openModal(){document.getElementById('modal').style.display='block';document.getElementById('tournamentname').focus();}
        function closeModal(){document.getElementById('modal').style.display='none';}
        function addTournament(){const name=document.getElementById('tournamentname').value.trim();if(!name)return;tournaments.push({name:name,scores:{}});saveData();renderTable();closeModal();document.getElementById('tournamentname').value='';}
        function deleteTournament(idx){if(confirm('Eliminare?')){tournaments.splice(idx,1);saveData();renderTable();}}
        function saveData(){localStorage.setItem('fantatennis',JSON.stringify(tournaments));showStatus('Salvato!');}
        function resetData(){if(confirm('Reset tutto?')){tournaments=[];localStorage.removeItem('fantatennis');renderTable();showStatus('Resettato');}}
        function loadData(){const saved=localStorage.getItem('fantatennis');if(saved)tournaments=JSON.parse(saved);}
        function showStatus(msg){const status=document.getElementById('status');status.textContent=msg;status.style.display='block';setTimeout(()=>status.style.display='none',2000);}
        document.addEventListener('DOMContentLoaded',init);
        window.onclick=e=>{if(e.target.id==='modal')closeModal();};
        document.getElementById('tournamentname').addEventListener('keypress',e=>{if(e.key==='Enter')addTournament();});
        
        
        
        

   
    </script>
</body>
</html>
